# æˆ¿åœ°ç”¢äº¤æ˜“è¦–è¦ºåŒ–ç³»çµ±

ä½¿ç”¨ Deck.gl å’Œ React æ‰“é€ çš„äº’å‹•å¼æˆ¿åœ°ç”¢äº¤æ˜“è¦–è¦ºåŒ–å·¥å…·ï¼Œæ”¯æ´æ™‚é–“è»¸å‹•ç•«å±•ç¤ºã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ—ºï¸ **2D åœ°åœ–è¦–è¦ºåŒ–**ï¼š100m Ã— 100m ç¶²æ ¼é¡¯ç¤ºæˆ¿åƒ¹åˆ†å¸ƒ
- â±ï¸ **æ™‚é–“è»¸å‹•ç•«**ï¼šæŒ‰æœˆä»½æ’­æ”¾æˆ¿åƒ¹è®ŠåŒ–è¶¨å‹¢
- ğŸ¨ **é¡è‰²ç·¨ç¢¼**ï¼šç›´è§€å‘ˆç¾æˆ¿åƒ¹é«˜ä½å·®ç•°
- ğŸ“Š **å³æ™‚çµ±è¨ˆ**ï¼šé¡¯ç¤ºç•¶å‰æœˆä»½çš„çµ±è¨ˆæ•¸æ“š
- ğŸ–±ï¸ **äº’å‹•å¼æ“ä½œ**ï¼šæ‹–æ›³ã€ç¸®æ”¾ã€æ‡¸åœæŸ¥çœ‹è©³æƒ…

## å¿«é€Ÿé–‹å§‹

### å®‰è£ä¾è³´
```bash
npm install
```

### å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
```bash
npm run dev
```

è¨ªå• http://localhost:3000

> **æ³¨æ„**ï¼šç›®å‰ä½¿ç”¨ Mapbox çš„å…¬é–‹ç¤ºä¾‹ tokenï¼Œåƒ…ä¾›æ¸¬è©¦ä½¿ç”¨ã€‚å»ºè­°ç”³è«‹è‡ªå·±çš„å…è²» tokenã€‚

### å»ºç½®å°ˆæ¡ˆ
```bash
npm run build
```

## Mapbox Token è¨­å®šï¼ˆé¸ç”¨ï¼‰

ç›®å‰å°ˆæ¡ˆä½¿ç”¨å…¬é–‹çš„æ¸¬è©¦ tokenï¼Œä½†å»ºè­°ç”³è«‹è‡ªå·±çš„å…è²» token ä»¥ç²å¾—æ›´å¥½çš„ç©©å®šæ€§ï¼š

1. **ç”³è«‹å…è²» Mapbox Token**
   - å‰å¾€ï¼šhttps://account.mapbox.com/
   - è¨»å†Šå¸³è™Ÿï¼ˆå…è²»ï¼‰
   - å»ºç«‹æ–°çš„ access token
   - å…è²»é¡åº¦ï¼šæ¯æœˆ 50,000 æ¬¡åœ°åœ–è¼‰å…¥

2. **è¨­å®šç’°å¢ƒè®Šæ•¸**ï¼ˆé¸ç”¨ï¼‰
   ```bash
   cp .env.example .env
   # ç·¨è¼¯ .envï¼Œå¡«å…¥ä½ çš„ token
   ```

3. **ä¿®æ”¹ç¨‹å¼ç¢¼ä½¿ç”¨ç’°å¢ƒè®Šæ•¸**ï¼ˆé¸ç”¨ï¼‰
   åœ¨ `real-estate-viz.jsx` ä¸­ï¼š
   ```javascript
   mapboxAccessToken={import.meta.env.VITE_MAPBOX_TOKEN || "é è¨­token"}
   ```

## ä½¿ç”¨å¯¦éš›è³‡æ–™

### æ–¹æ³• 1ï¼šä½¿ç”¨ç¯„ä¾‹è³‡æ–™ç”¢ç”Ÿå™¨

```bash
node data-processor.js
```

é€™æœƒç”¢ç”Ÿ `sample-data.json`ï¼ŒåŒ…å«å°åŒ—å¸‚å„å€çš„æ¨¡æ“¬è³‡æ–™ã€‚

### æ–¹æ³• 2ï¼šè™•ç†å¯¦åƒ¹ç™»éŒ„ CSV

1. **ä¸‹è¼‰è³‡æ–™**
   - å‰å¾€ [å…§æ”¿éƒ¨ä¸å‹•ç”¢äº¤æ˜“å¯¦åƒ¹ç™»éŒ„](https://plvr.land.moi.gov.tw/)
   - ä¸‹è¼‰æ‰€éœ€ç¸£å¸‚ã€æ™‚é–“ç¯„åœçš„ CSV æª”æ¡ˆ

2. **è™•ç†è³‡æ–™**
   ç·¨è¼¯ `data-processor.js`ï¼Œå–æ¶ˆè¨»è§£ä¸¦åŸ·è¡Œï¼š
   ```javascript
   processRealEstateData('./your-data.csv', {
     minPrice: 200000,      // æœ€ä½å–®åƒ¹ç¯©é¸
     maxPrice: 1500000,     // æœ€é«˜å–®åƒ¹ç¯©é¸
     outputPath: './real-data.json'
   });
   ```

3. **è¼‰å…¥è³‡æ–™åˆ°è¦–è¦ºåŒ–**
   ä¿®æ”¹ `real-estate-viz.jsx`ï¼š
   ```javascript
   import realData from './real-data.json';

   // æ›¿æ› generateMockData() ç‚ºï¼š
   const allData = useMemo(() => realData, []);
   ```

## è³‡æ–™æ ¼å¼èªªæ˜

è¦–è¦ºåŒ–çµ„ä»¶æ¥å—çš„è³‡æ–™æ ¼å¼ï¼š

```javascript
[
  {
    position: [121.5654, 25.0330],  // [ç¶“åº¦, ç·¯åº¦]
    price: 650000,                   // å–®åƒ¹ï¼ˆå…ƒ/åªï¼‰
    yearMonth: "2023-01",            // äº¤æ˜“å¹´æœˆ
    area: 25.5,                      // åªæ•¸
    address: "å°åŒ—å¸‚å¤§å®‰å€",          // åœ°å€ï¼ˆé¸ç”¨ï¼‰
    buildingType: "ä½å®…å¤§æ¨“"          // å»ºç‰©å‹æ…‹ï¼ˆé¸ç”¨ï¼‰
  },
  // ...æ›´å¤šè³‡æ–™
]
```

## é‡è¦æ³¨æ„äº‹é …

### åœ°ç†ç·¨ç¢¼å•é¡Œ

å¯¦åƒ¹ç™»éŒ„è³‡æ–™é€šå¸¸**æ²’æœ‰ç¶“ç·¯åº¦**ï¼Œéœ€è¦è™•ç†ï¼š

1. **ä½¿ç”¨åœ°ç†ç·¨ç¢¼ API**
   - Google Maps Geocoding API
   - å°ç£åœ°å€å®šä½æœå‹™ API
   - å…¶ä»–ç¬¬ä¸‰æ–¹æœå‹™

2. **ç¯„ä¾‹ï¼šGoogle Maps API**
   ```javascript
   async function geocodeAddress(address) {
     const apiKey = 'YOUR_API_KEY';
     const url = `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(address)}&key=${apiKey}`;
     const response = await fetch(url);
     const data = await response.json();
     return {
       lat: data.results[0].geometry.location.lat,
       lng: data.results[0].geometry.location.lng
     };
   }
   ```

3. **æ³¨æ„äº‹é …**
   - å¯¦åƒ¹ç™»éŒ„åœ°å€æœ‰å»è­˜åˆ¥åŒ–ï¼ˆä¾‹å¦‚ï¼šå¤§å®‰å€å¾©èˆˆå—è·¯ 2~30 è™Ÿï¼‰
   - å¤§é‡åœ°ç†ç·¨ç¢¼éœ€è¦ä»˜è²» API æˆ–è™•ç†é€Ÿç‡é™åˆ¶
   - å»ºè­°é å…ˆè™•ç†ä¸¦å¿«å–çµæœ

## è³‡æ–™ä¾†æºæ¨è–¦

### å®˜æ–¹ä¾†æº
- [å…§æ”¿éƒ¨ä¸å‹•ç”¢äº¤æ˜“å¯¦åƒ¹ç™»éŒ„](https://plvr.land.moi.gov.tw/)
- [æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å°](https://data.gov.tw/)

### API æœå‹™
- å…§æ”¿éƒ¨ä¸å‹•ç”¢å¯¦åƒ¹æŸ¥è©¢æœå‹™ API
- å„ç¸£å¸‚æ”¿åºœé–‹æ”¾è³‡æ–™ API

## è‡ªè¨‚è¨­å®š

### èª¿æ•´ç¶²æ ¼å¤§å°
ä¿®æ”¹ `real-estate-viz.jsx`:
```javascript
cellSize: 100,  // æ”¹ç‚º 50 (50å…¬å°º) æˆ– 200 (200å…¬å°º)
```

### èª¿æ•´é¡è‰²ç¯„åœ
```javascript
const colorScale = scaleLinear()
  .domain([300000, 500000, 700000, 900000])  // èª¿æ•´åƒ¹æ ¼å€é–“
  .range([
    [65, 182, 196],   // ä½åƒ¹ - è—è‰²
    [127, 205, 187],  // ä¸­ä½åƒ¹ - é’è‰²
    [253, 180, 98],   // ä¸­é«˜åƒ¹ - æ©™è‰²
    [214, 96, 77]     // é«˜åƒ¹ - ç´…è‰²
  ]);
```

### åˆ‡æ› 2D/3D æ¨¡å¼
```javascript
// 2D æ¨¡å¼
pitch: 0,
extruded: false,
elevationScale: 0,

// 3D æ¨¡å¼
pitch: 45,
extruded: true,
elevationScale: 20,
```

## æŠ€è¡“å †ç–Š

- **React** 18 - UI æ¡†æ¶
- **Deck.gl** 9 - WebGL è¦–è¦ºåŒ–å¼•æ“
- **Vite** - å»ºç½®å·¥å…·
- **Tailwind CSS** - æ¨£å¼æ¡†æ¶
- **D3 Scale** - è³‡æ–™ç¸®æ”¾å·¥å…·
- **Lucide React** - åœ–ç¤ºåº«

## æˆæ¬Š

MIT License
